{"ast":null,"code":"import React from\"react\";import{useForm}from\"react-hook-form\";import{useFetchData}from\"../hooks/useFetchData\";import Skeleton from\"react-loading-skeleton\";import\"react-loading-skeleton/dist/skeleton.css\";import\"../App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SelectionView=()=>{var _data$docs;// Using react-hook-form for form handling and validation\nconst{register,handleSubmit,formState:{errors}}=useForm();const[shouldFetch,setShouldFetch]=React.useState(false);const[formData,setFormData]=React.useState({question:\"\",folder:\"\",numDocs:\"\"});const{data,isLoading,isError,reload}=useFetchData(formData,shouldFetch);// handleSubmit is provided by react-hook-form\nconst onSubmit=data=>{setFormData(data);// Update formData with the submitted values\nsetShouldFetch(true);// Trigger data fetching\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"question\",children:\"Question\"}),/*#__PURE__*/_jsx(\"input\",{id:\"question\",type:\"text\",placeholder:\"Enter your question\",...register(\"question\",{required:\"Question is required\",minLength:{value:5,message:\"Question should be at least 5 characters\"}}),className:\"custom-input\"}),errors.question&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.question.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"folder\",children:\"Select Client Folder\"}),/*#__PURE__*/_jsx(\"select\",{id:\"folder\",...register(\"folder\",{required:\"Please select a folder\"}),className:\"custom-select\",children:/*#__PURE__*/_jsx(\"option\",{value:\"default-folder\",children:\"Default folder\"})}),errors.folder&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.folder.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"numDocs\",children:\"Select Number of Documents\"}),/*#__PURE__*/_jsx(\"select\",{id:\"numDocs\",...register(\"numDocs\",{required:\"Please select the number of documents\"}),className:\"custom-select\",children:[...Array(10)].map((_,i)=>/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1))}),errors.numDocs&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.numDocs.message})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-section\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",type:\"submit\",children:\"Submit\"})})]}),isError?/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Oops! Something went wrong. Please try again later.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"retry-button\",onClick:reload,children:\"Retry\"})]}):isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"response-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"doc-response\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"u\",{children:\"Retrieving docs...\"})}),[...Array(3)].map((_,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"doc\",children:[/*#__PURE__*/_jsx(Skeleton,{width:200,height:30}),/*#__PURE__*/_jsxs(\"div\",{className:\"doc-info\",children:[/*#__PURE__*/_jsx(Skeleton,{width:100,height:20}),/*#__PURE__*/_jsx(Skeleton,{width:100,height:20}),/*#__PURE__*/_jsx(Skeleton,{width:100,height:20})]})]},i))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"answer-response\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"u\",{children:\"GPT Answer:\"})}),/*#__PURE__*/_jsx(Skeleton,{count:5})]})]}):data!==null&&data!==void 0&&(_data$docs=data.docs)!==null&&_data$docs!==void 0&&_data$docs.length||data!==null&&data!==void 0&&data.gptAnswer?/*#__PURE__*/_jsxs(\"div\",{className:\"response-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"doc-response\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"u\",{children:\"Docs retrieved:\"})}),data.docs.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No documents found for the selected folder.\"}):data.docs.map(doc=>/*#__PURE__*/_jsxs(\"div\",{className:\"doc\",children:[/*#__PURE__*/_jsx(\"h2\",{children:doc.snippet}),/*#__PURE__*/_jsxs(\"div\",{className:\"doc-info\",children:[doc.filePath&&/*#__PURE__*/_jsxs(\"h4\",{children:[\"File path: \",doc.filePath]}),doc.batesNumber&&/*#__PURE__*/_jsxs(\"h4\",{children:[\"Bates number: \",doc.batesNumber]}),doc.pageNumber&&/*#__PURE__*/_jsxs(\"h4\",{children:[\"Page number: \",doc.pageNumber]})]})]},doc.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"answer-response\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"u\",{children:\"GPT Answer:\"})}),/*#__PURE__*/_jsx(\"p\",{children:data.gptAnswer})]})]}):null]});};export default SelectionView;","map":{"version":3,"names":["React","useForm","useFetchData","Skeleton","jsx","_jsx","jsxs","_jsxs","SelectionView","_data$docs","register","handleSubmit","formState","errors","shouldFetch","setShouldFetch","useState","formData","setFormData","question","folder","numDocs","data","isLoading","isError","reload","onSubmit","className","children","htmlFor","id","type","placeholder","required","minLength","value","message","Array","map","_","i","onClick","width","height","count","docs","length","gptAnswer","doc","snippet","filePath","batesNumber","pageNumber"],"sources":["/Users/fouxan/Personal/whistleblower/src/components/SelectionView.js"],"sourcesContent":["import React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useFetchData } from \"../hooks/useFetchData\";\nimport Skeleton from \"react-loading-skeleton\";\nimport \"react-loading-skeleton/dist/skeleton.css\";\nimport \"../App.css\";\n\nconst SelectionView = () => {\n    // Using react-hook-form for form handling and validation\n    const {\n        register,\n        handleSubmit,\n        formState: { errors },\n    } = useForm();\n    const [shouldFetch, setShouldFetch] = React.useState(false);\n    const [formData, setFormData] = React.useState({\n        question: \"\",\n        folder: \"\",\n        numDocs: \"\",\n    });\n\n    const { data, isLoading, isError, reload } = useFetchData(\n        formData,\n        shouldFetch\n    );\n\n    // handleSubmit is provided by react-hook-form\n    const onSubmit = (data) => {\n        setFormData(data); // Update formData with the submitted values\n        setShouldFetch(true); // Trigger data fetching\n    };\n\n    return (\n        <div className=\"container\">\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"input-section\">\n                    <div className=\"input-field\">\n                        <label htmlFor=\"question\">Question</label>\n                        <input\n                            id=\"question\"\n                            type=\"text\"\n                            placeholder=\"Enter your question\"\n                            {...register(\"question\", {\n                                required: \"Question is required\",\n                                minLength: {\n                                    value: 5,\n                                    message:\n                                        \"Question should be at least 5 characters\",\n                                },\n                            })}\n                            className=\"custom-input\"\n                        />\n                        {errors.question && (\n                            <span className=\"error-message\">\n                                {errors.question.message}\n                            </span>\n                        )}\n                    </div>\n\n                    <div className=\"input-field\">\n                        <label htmlFor=\"folder\">Select Client Folder</label>\n                        <select\n                            id=\"folder\"\n                            {...register(\"folder\", {\n                                required: \"Please select a folder\",\n                            })}\n                            className=\"custom-select\"\n                        >\n                            <option value=\"default-folder\">\n                                Default folder\n                            </option>\n                        </select>\n                        {errors.folder && (\n                            <span className=\"error-message\">\n                                {errors.folder.message}\n                            </span>\n                        )}\n                    </div>\n\n                    <div className=\"input-field\">\n                        <label htmlFor=\"numDocs\">\n                            Select Number of Documents\n                        </label>\n                        <select\n                            id=\"numDocs\"\n                            {...register(\"numDocs\", {\n                                required:\n                                    \"Please select the number of documents\",\n                            })}\n                            className=\"custom-select\"\n                        >\n                            {[...Array(10)].map((_, i) => (\n                                <option key={i + 1} value={i + 1}>\n                                    {i + 1}\n                                </option>\n                            ))}\n                        </select>\n                        {errors.numDocs && (\n                            <span className=\"error-message\">\n                                {errors.numDocs.message}\n                            </span>\n                        )}\n                    </div>\n                </div>\n                <div className=\"submit-section\">\n                    <button className=\"submit-button\" type=\"submit\">\n                        Submit\n                    </button>\n                </div>\n            </form>\n            {isError ? (\n                <div className=\"error-message\">\n                    <p>Oops! Something went wrong. Please try again later.</p>\n                    <button className=\"retry-button\" onClick={reload}>\n                        Retry\n                    </button>\n                </div>\n            ) : isLoading ? (\n                <div className=\"response-section\">\n                    <div className=\"doc-response\">\n                        <h3>\n                            <u>Retrieving docs...</u>\n                        </h3>\n                        {[...Array(3)].map((_, i) => (\n                            <div className=\"doc\" key={i}>\n                                <Skeleton width={200} height={30} />\n                                <div className=\"doc-info\">\n                                    <Skeleton width={100} height={20} />\n                                    <Skeleton width={100} height={20} />\n                                    <Skeleton width={100} height={20} />\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                    <div className=\"answer-response\">\n                        <h3>\n                            <u>GPT Answer:</u>\n                        </h3>\n                        <Skeleton count={5} />\n                    </div>\n                </div>\n            ) : data?.docs?.length || data?.gptAnswer ? (\n                <div className=\"response-section\">\n                    <div className=\"doc-response\">\n                        <h3>\n                            <u>Docs retrieved:</u>\n                        </h3>\n                        {data.docs.length === 0 ? (\n                            <p>No documents found for the selected folder.</p>\n                        ) : (\n                            data.docs.map((doc) => (\n                                <div className=\"doc\" key={doc.id}>\n                                    <h2>{doc.snippet}</h2>\n                                    <div className=\"doc-info\">\n                                        {doc.filePath && (\n                                            <h4>File path: {doc.filePath}</h4>\n                                        )}\n                                        {doc.batesNumber && (\n                                            <h4>\n                                                Bates number: {doc.batesNumber}\n                                            </h4>\n                                        )}\n                                        {doc.pageNumber && (\n                                            <h4>\n                                                Page number: {doc.pageNumber}\n                                            </h4>\n                                        )}\n                                    </div>\n                                </div>\n                            ))\n                        )}\n                    </div>\n                    <div className=\"answer-response\">\n                        <h3>\n                            <u>GPT Answer:</u>\n                        </h3>\n                        <p>{data.gptAnswer}</p>\n                    </div>\n                </div>\n            ) : null}\n        </div>\n    );\n};\n\nexport default SelectionView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}